{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,gJCnBT,IAAAE,EAAAC,EAAA,S,0BAOOC,eAAeC,EAAYC,GAChC,MAAMC,EAAUD,EAAEE,OAAOC,QAAQC,WAC3BC,EAAiBJ,E,CAGlBH,eAAeO,EAAiBD,GACrC,MAAME,KAAEA,SAAe,EAAAC,EAAAC,eAAcJ,IAIvC,SAAsBE,GACpB,MAAMG,EAASC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,mBAAqB,IAC9DC,cAAEA,EAAaC,eAAEA,EAAcC,WAAEA,EAAUC,OAAEA,EAAMC,QAAEA,GAAYd,EAEjEe,EADQZ,EAAOa,MAAKC,GAAQA,EAAKP,gBAAkBA,IACrC,uBAAyB,kBACvCQ,EAAS,+OAIIC,EAAA7B,yFAGQoB,4CACMI,GAAoB,gGAI/CH,GAEI,yJAImCC,oEACYC,GACpC,oKAMHE,iBAAmBL,oBAE/BK,qCAINK,SAASC,KAAKC,mBAAmB,YAAaJ,GAC9CE,SACGG,cAAc,kBACdC,iBAAiB,QAASC,GAC7BL,SACGG,cAAc,oBACdC,iBAAiB,QAASE,E,CA9C7BC,CAAa3B,EAAK4B,YAAY,G,CAiDhC,SAASH,IACPL,SACGG,cAAc,kBACdM,oBAAoB,QAASJ,GAChCL,SACGG,cAAc,oBACdM,oBAAoB,QAASH,GAChCN,SAASG,cAAc,yBAAyBO,Q,CAGlD,SAASJ,EAAahC,IACpB,EAAAc,EAAAuB,eAAcrC,EAAEE,OAAOC,QAAQC,K,uCC1EjCkC,EAAAC,QAAiB,IAAAC,IAAoB3C,EAAA,SAAA4C,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,U,gJCA5F,IAAAtC,EAAAV,EAAA,SAEO,MAAMiD,EAAkB,yBAExBhD,eAAeiD,EAAc3C,GAClC,IACE,MAAME,KAAEA,SAAe,EAAAC,EAAAC,eAAcJ,IAC/BY,cAAEA,EAAaC,eAAEA,EAAcC,WAAEA,EAAUC,OAAEA,EAAMC,QAAEA,GACzDd,EAAK4B,YAAY,GACbzB,EAASC,KAAKC,MAAMC,aAAaC,QAAQiC,KAAqB,GAC9DE,EAAU,C,cACdhC,E,eACAC,E,WACAC,E,OACAC,E,QACAC,GAGF,IAAK,IAAI7B,EAAI,EAAGA,EAAIkB,EAAOjB,OAAQD,IACjC,GAAIkB,EAAOlB,GAAGyB,gBAAkBA,EAI9B,OAHAP,EAAOwC,OAAO1D,EAAG,GACjBqB,aAAasC,QAAQJ,EAAiBpC,KAAKyC,UAAU1C,SAgC3DiB,SAASG,cAAc,oBAAoBuB,YAAc,mBAJzD1B,SAASG,cAAc,oBAAoBuB,YACzC,uBAvBA3C,EAAO4C,KAAKL,GACZpC,aAAasC,QAAQJ,EAAiBpC,KAAKyC,UAAU1C,IACrD6C,QAAQC,IAAIjD,EAAK4B,YAAY,G,CAC7B,MAAOsB,GACPF,QAAQC,IAAIC,E,MC/BhB3D,EAAA,SAAA4D,SAA8C/C,KAAKC,MAAM","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/components/modal/modalIngr.js","node_modules/@parcel/runtime-js/lib/runtime-2b8e1dd7d7a9f09e.js","src/js/components/favourites/ingredients/fav_ingredients.js","node_modules/@parcel/runtime-js/lib/runtime-0ba0b46644f4631b.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import sprite from '../../../images/svg/sprite.svg';\nimport { getIngrByName } from '../../api';\nimport {\n  addBtnFavIngr,\n  FAV_INGREDIENTS,\n} from '../favourites/ingredients/fav_ingredients';\n\nexport async function onClickIngr(e) {\n  const searchQ = e.target.dataset.name;\n  await searchIngrByName(searchQ);\n}\n\nexport async function searchIngrByName(name) {\n  const { data } = await getIngrByName(name);\n  renderMarkup(data.ingredients[0]);\n}\n\nfunction renderMarkup(data) {\n  const actArr = JSON.parse(localStorage.getItem(FAV_INGREDIENTS)) || [];\n  const { strIngredient, strDescription, strAlcohol, strABV, strType } = data;\n  const isFav = actArr.find(item => item.strIngredient === strIngredient);\n  const btn = isFav ? 'Remove from favorite' : 'Add to favorite';\n  const markup = `<div class=\"backdrop--ingredient\" >\n  <div class=\"modal--ingredient\">\n    <button type=\"button\" aria-label=\"Close button\" class=\"modal__close js_modal-ingr\">\n      <svg class=\"modal__icon\" width=\"24\" height=\"24\">\n        <use href=\"${sprite}#icon-close-burger\"></use>\n      </svg>\n    </button>\n    <h2 class=\"ingredient\">${strIngredient}</h2>\n    <h3 class=\"ingredient__sort\">${strType ? strType : 'no info'}</h3>\n    <div class=\"line\"></div>\n    <p class=\"ingredient__description\">\n      ${\n        strDescription\n          ? strDescription\n          : 'sorry, but we not information about this ingredient...'\n      }\n    </p>\n    <ul class=\"ingredient__list\">\n      <li class=\"ingredient__items\">✶ Alcohol: ${strAlcohol}</li>\n      <li class=\"ingredient__items\">✶ Alcohol by volume: ${\n        strABV ? strABV : 'no information'\n      }</li>\n    </ul>\n    <button\n      type=\"button\"\n      class=\"button js-mod-ingr-add modal__button--favorite--ingredients\"\n      aria-label=\"${btn}\" data-name=\"${strIngredient}\"\n    >\n      ${btn}\n    </button>\n  </div>\n</div>`;\n  document.body.insertAdjacentHTML('beforeend', markup);\n  document\n    .querySelector('.js_modal-ingr')\n    .addEventListener('click', closeModalIngr);\n  document\n    .querySelector('.js-mod-ingr-add')\n    .addEventListener('click', addToFavIngr);\n}\n\nfunction closeModalIngr() {\n  document\n    .querySelector('.js_modal-ingr')\n    .removeEventListener('click', closeModalIngr);\n  document\n    .querySelector('.js-mod-ingr-add')\n    .removeEventListener('click', addToFavIngr);\n  document.querySelector('.backdrop--ingredient').remove();\n}\n\nfunction addToFavIngr(e) {\n  addBtnFavIngr(e.target.dataset.name);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7kCeP\")).toString();","import { getIngrByName } from '../../../api';\n\nexport const FAV_INGREDIENTS = 'favourites_ingredients';\n\nexport async function addBtnFavIngr(name) {\n  try {\n    const { data } = await getIngrByName(name);\n    const { strIngredient, strDescription, strAlcohol, strABV, strType } =\n      data.ingredients[0];\n    const actArr = JSON.parse(localStorage.getItem(FAV_INGREDIENTS)) || [];\n    const ingrArr = {\n      strIngredient,\n      strDescription,\n      strAlcohol,\n      strABV,\n      strType,\n    };\n\n    for (let i = 0; i < actArr.length; i++) {\n      if (actArr[i].strIngredient === strIngredient) {\n        actArr.splice(i, 1);\n        localStorage.setItem(FAV_INGREDIENTS, JSON.stringify(actArr));\n        addBtnModal();\n        return;\n      }\n    }\n    removeBtnModal();\n    actArr.push(ingrArr);\n    localStorage.setItem(FAV_INGREDIENTS, JSON.stringify(actArr));\n    console.log(data.ingredients[0]);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function removeBtnCard(id) {\n  document.querySelector(`button[data-favid=\"${id}\"]`).innerHTML = `Remove\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-heart_full\"></use>\n          </svg>`;\n}\nexport function addBtnCard(id) {\n  document.querySelector(`button[data-favid=\"${id}\"]`).innerHTML = `Add to\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-Heart\"></use>\n          </svg>`;\n}\n\nexport function removeBtnModal() {\n  document.querySelector('.js-mod-ingr-add').textContent =\n    'Remove from favorite';\n}\nexport function addBtnModal() {\n  document.querySelector('.js-mod-ingr-add').textContent = 'Add to favorite';\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1J3sT\\\":\\\"index.419c362f.js\\\",\\\"7kCeP\\\":\\\"sprite.86d7718d.svg\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$bpbYH","parcelRequire","async","$0e3c8c81568da39a$export$cbfaad7f51912dff","e","searchQ","target","dataset","name","$0e3c8c81568da39a$export$c861fa196d086e2","data","$aEubW","getIngrByName","actArr","JSON","parse","localStorage","getItem","$jCADl","FAV_INGREDIENTS","strIngredient","strDescription","strAlcohol","strABV","strType","btn","find","item","markup","$parcel$interopDefault","document","body","insertAdjacentHTML","querySelector","addEventListener","$0e3c8c81568da39a$var$closeModalIngr","$0e3c8c81568da39a$var$addToFavIngr","$0e3c8c81568da39a$var$renderMarkup","ingredients","removeEventListener","remove","addBtnFavIngr","module","exports","URL","resolve","import","meta","url","toString","$e48dfb996a73c387$export$11ce4b80ea093b0e","$e48dfb996a73c387$export$59058a7bdd47db15","ingrArr","splice","setItem","stringify","textContent","push","console","log","error","register"],"version":3,"file":"index.419c362f.js.map"}