{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-ca4f2c405daec4a3.js","src/js/components/favourites/index.js","node_modules/@parcel/runtime-js/lib/runtime-2b8e1dd7d7a9f09e.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cm6eq\\\":\\\"f_coctail.76d6c24f.js\\\",\\\"7kCeP\\\":\\\"sprite.86d7718d.svg\\\",\\\"jBXHn\\\":\\\"f_coctail.4d43b0c9.js\\\",\\\"1Mf1J\\\":\\\"f_coctail.8a1015bd.js\\\"}\"));","import { FAV_COCKTAIL, btnAddFav } from './fav_cocktails';\nimport sprite from '../../../images/svg/sprite.svg';\nimport { onClickIngr } from '../modal/modalIngr';\n// import { renderMarkup, collectIngr } from '../modal/index';\n\nconst refCocktList = document.querySelector('.js-add_f-coctail');\nconst actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\nrefCocktList.addEventListener('click', deleteCard);\n\n///\nlet ingredientsList = [];\nlet ingredientsNameList = [];\nasync function searchCoctById(id) {\n  try {\n    const { data } = await getCoctById(id);\n    collectIngredients(data.drinks);\n    renderMarkupModal(...data.drinks, ingredientsList);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction collectIngredients(newArr = []) {\n  for (let i = 1; i <= 15; i++) {\n    if (newArr[0][`strIngredient` + i] === null) return;\n    ingredientsNameList.push(newArr[0][`strIngredient` + i]);\n\n    if (newArr[0]['strMeasure' + i] === null) {\n      return ingredientsList.push(newArr[0][`strIngredient` + i]);\n    }\n\n    ingredientsList.push(\n      newArr[0][`strIngredient` + i] + ' ' + newArr[0][`strMeasure` + i]\n    );\n  }\n}\n\nfunction renderMarkupModal(data, ingredients) {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  const { strDrink, strDrinkThumb, strInstructions, idDrink } = data;\n  const isFav = actArr.find(item => item.strDrink === strDrink);\n  const btn = isFav ? 'Remove from favorite' : 'Add to favorite';\n  const markup = `\n<div class=\"backdrop\">\n  <div class=\"modal\">\n    <button type=\"button\" aria-label=\"Close button\" class=\"modal__close\" >\n      <svg class=\"modal__icon\" width=\"24\" height=\"24\">\n        <use href=\"${sprite}#icon-close-burger\"></use>\n      </svg>\n    </button>\n    <h2 class=\"coctail\">${strDrink}</h2>\n    <h3 class=\"coctail__instruction\">INSTRUCTIONS:</h3>\n    <p class=\"coctail__description\">${strInstructions}\n    </p>\n    <img class=\"coctail__img\" src=${strDrinkThumb} alt=${strDrink} />\n    <h4 class=\"ingredients\">INGREDIENTS</h4>\n    <p class=\"ingredients__denominator\">Per coctail</p>\n    <ul class=\"ingredients__list\">\n       ${ingredients\n         .map(\n           (ingr, ind) =>\n             `<li class=\"ingredients__items\" data-name=\"${ingredientsNameList[ind]}\">âœ¶ ${ingr}</li>`\n         )\n         .join('')}\n    </ul>\n    <button\n      type=\"button\"\n      class=\"button modal__button--favorite\"\n      aria-label=\"${btn}\"\n      data-add=\"add\" data-favid=${idDrink}\n    >\n      ${btn}\n    </button>\n  </div>\n</div>`;\n  document.body.insertAdjacentHTML('beforeend', markup);\n  document.querySelector('.modal__close').addEventListener('click', closeModal);\n  document.querySelector('.modal').addEventListener('click', modalBtnListener);\n  document\n    .querySelector('.ingredients__list')\n    .addEventListener('click', onClickIngr);\n}\n\nexport function closeModal(e) {\n  document\n    .querySelector('.modal__close')\n    .removeEventListener('click', closeModal);\n  // document.querySelector('.modal').removeEventListener('click', cardBtnListenr);\n  document.querySelector('.backdrop').remove();\n  ingrList = [];\n  ingrNameList = [];\n}\n\nexport function modalBtnListener(e) {\n  if (e.target.dataset.add) return btnAddFav(e.target.dataset.favid, 'modal');\n}\n\n///\n\nif (actArr.length) {\n  renderMarkupList(actArr);\n} else {\n  renderErrorMarkup();\n}\n\nfunction deleteCard(e) {\n  if (e.target.tagName !== 'BUTTON') return;\n  if (e.target.dataset.favid) {\n    deleteFavFromLS(e.target.dataset.favid);\n    e.target.parentNode.parentNode.remove();\n    return;\n  }\n  if (e.target.dataset.type) return searchCoctById(e.target.dataset.id);\n}\n\nfunction renderMarkupList(data = []) {\n  const mark = data\n    .map(({ strDrink, strDrinkThumb, idDrink }) => {\n      return `<li class=\"coctail-card\">\n      <img class=\"img\" src=${strDrinkThumb} alt=${strDrink}/img>\n      <h3 class=\"coctail-card__name\">${strDrink}</h3>\n      <div class=\"coctail-card__options\">\n        <button class=\"button-learn_more\" data-id=${idDrink} data-type=\"learn\">Learn more</button>\n        <button class=\"button-add_to\" data-favid=${idDrink} data-add=\"add\">\n          Remove\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-heart_full\"></use>\n          </svg>\n        </button>\n      </div>\n    </li>`;\n    })\n    .join('');\n  refCocktList.innerHTML = mark;\n}\n\nfunction renderErrorMarkup() {\n  const mark = `<li class=\"f-coctails__item\">\n              You haven't added any favorite cocktails yet\n            </li>`;\n  refCocktList.innerHTML = mark;\n}\n\nfunction deleteFavFromLS(id) {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  for (let i = 0; i < actArr.length; i++) {\n    if (actArr[i].idDrink === id) {\n      actArr.splice(i, 1);\n      localStorage.setItem(FAV_COCKTAIL, JSON.stringify(actArr));\n      return;\n    }\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7kCeP\")).toString();"],"names":["parcelRequire","register","JSON","parse","$87vAp","$84db521a7f184057$exports","URL","resolve","import","meta","url","toString","$d090c5f393355eca$var$refCocktList","document","querySelector","$d090c5f393355eca$var$actArr","localStorage","getItem","FAV_COCKTAIL","addEventListener","e","target","tagName","dataset","favid","id","actArr2","i","length","idDrink","splice","setItem","stringify","$d090c5f393355eca$var$deleteFavFromLS","parentNode","remove","type","async","data","getCoctById","newArr","$d090c5f393355eca$var$ingredientsNameList","push","$d090c5f393355eca$var$ingredientsList","$d090c5f393355eca$var$collectIngredients","drinks","ingredients","actArr1","strDrink","strDrinkThumb","strInstructions","btn","find","item","markup","$parcel$interopDefault","map","ingr","ind","join","body","insertAdjacentHTML","$d090c5f393355eca$export$3f6fecd573f3fa48","$d090c5f393355eca$export$fdcdaebe9817737f","$1dMoQ","onClickIngr","$d090c5f393355eca$var$renderMarkupModal","error","console","log","$d090c5f393355eca$var$searchCoctById","removeEventListener","ingrList","ingrNameList","add","btnAddFav","mark","innerHTML","$d090c5f393355eca$var$renderMarkupList"],"version":3,"file":"f_coctail.76d6c24f.js.map"}