{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-b3fe0fe647c427bd.js","src/js/components/favourites/fav_cocktails.js","node_modules/@parcel/runtime-js/lib/runtime-2b8e1dd7d7a9f09e.js","src/js/components/modal/index.js","src/js/components/favourites/index.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cm6eq\\\":\\\"f_coctail.dd89cc4c.js\\\",\\\"7kCeP\\\":\\\"sprite.86d7718d.svg\\\",\\\"6NZvo\\\":\\\"f_coctail.c3664333.js\\\"}\"));","import { getCoctById } from './../../api';\nimport sprite from '../../../images/svg/sprite.svg';\n\nexport const FAV_COCKTAIL = 'favourites_coctails';\n\n// Local Storage\nexport async function btnAddFav(id, type) {\n  try {\n    const { data } = await getCoctById(id);\n    const { strDrink, strDrinkThumb, idDrink } = data.drinks[0];\n    const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n    const drinkArr = {\n      strDrink,\n      strDrinkThumb,\n      idDrink,\n    };\n    for (let i = 0; i < actArr.length; i++) {\n      if (actArr[i].idDrink === idDrink) {\n        actArr.splice(i, 1);\n        localStorage.setItem(FAV_COCKTAIL, JSON.stringify(actArr));\n        if (!type) {\n          addBtnCard(idDrink);\n        } else {\n          addBtnModal(idDrink);\n        }\n        return;\n      }\n    }\n    actArr.push(drinkArr);\n    localStorage.setItem(FAV_COCKTAIL, JSON.stringify(actArr));\n\n    if (!type) {\n      removeBtnCard(idDrink);\n    } else {\n      removeBtnModal(idDrink);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport function removeBtnCard(id) {\n  document.querySelector(`button[data-favid=\"${id}\"]`).innerHTML = `Remove\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-heart_full\"></use>\n          </svg>`;\n}\nexport function addBtnCard(id) {\n  document.querySelector(`button[data-favid=\"${id}\"]`).innerHTML = `Add to\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-Heart\"></use>\n          </svg>`;\n}\n\nexport function removeBtnModal() {\n  document.querySelector('.modal__button--favorite').textContent =\n    'Remove from favorite';\n}\nexport function addBtnModal() {\n  document.querySelector('.modal__button--favorite').textContent =\n    'Add to favorite';\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7kCeP\")).toString();","import { getCoctById } from '../../api';\n// import { cardBtnListenr } from '../main';\nimport { FAV_COCKTAIL, btnAddFav } from '../favourites/fav_cocktails';\nimport { onClickIngr } from './modalIngr';\nimport sprite from '../../../images/svg/sprite.svg';\n\nexport let ingrList = [];\nexport let ingrNameList = [];\n\nexport async function searchCoctById(id) {\n  try {\n    const { data } = await getCoctById(id);\n    collectIngr(data.drinks);\n    renderMarkup(...data.drinks, ingrList);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function collectIngr(newArr = []) {\n  for (let i = 1; i <= 15; i++) {\n    if (newArr[0][`strIngredient` + i] === null) return;\n    ingrNameList.push(newArr[0][`strIngredient` + i]);\n\n    if (newArr[0]['strMeasure' + i] === null) {\n      return ingrList.push(newArr[0][`strIngredient` + i]);\n    }\n\n    ingrList.push(\n      newArr[0][`strIngredient` + i] + ' ' + newArr[0][`strMeasure` + i]\n    );\n  }\n}\n\nexport function renderMarkup(data, ingredients) {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  const { strDrink, strDrinkThumb, strInstructions, idDrink } = data;\n  const isFav = actArr.find(item => item.strDrink === strDrink);\n  const btn = isFav ? 'Remove from favorite' : 'Add to favorite';\n  const markup = `\n<div class=\"backdrop\">\n  <div class=\"modal\">\n    <button type=\"button\" aria-label=\"Close button\" class=\"modal__close\" >\n      <svg class=\"modal__icon\" width=\"24\" height=\"24\">\n        <use href=\"${sprite}#icon-close-burger\"></use>\n      </svg>\n    </button>\n    <h2 class=\"coctail\">${strDrink}</h2>\n    <h3 class=\"coctail__instruction\">INSTRUCTIONS:</h3>\n    <p class=\"coctail__description\">${strInstructions}\n    </p>\n    <img class=\"coctail__img\" src=${strDrinkThumb} alt=${strDrink} />\n    <h4 class=\"ingredients\">INGREDIENTS</h4>\n    <p class=\"ingredients__denominator\">Per coctail</p>\n    <ul class=\"ingredients__list\">\n       ${ingredients\n         .map(\n           (ingr, ind) =>\n             `<li class=\"ingredients__items\" data-name=\"${ingrNameList[ind]}\">âœ¶ ${ingr}</li>`\n         )\n         .join('')}\n    </ul>\n    <button\n      type=\"button\"\n      class=\"button modal__button--favorite\"\n      aria-label=\"${btn}\"\n      data-add=\"add\" data-favid=${idDrink}\n    >\n      ${btn}\n    </button>\n  </div>\n</div>`;\n  document.body.insertAdjacentHTML('beforeend', markup);\n  document.querySelector('.modal__close').addEventListener('click', closeModal);\n  document.querySelector('.modal').addEventListener('click', modalBtnListener);\n  document\n    .querySelector('.ingredients__list')\n    .addEventListener('click', onClickIngr);\n}\n\nexport function closeModal(e) {\n  document\n    .querySelector('.modal__close')\n    .removeEventListener('click', closeModal);\n  // document.querySelector('.modal').removeEventListener('click', cardBtnListenr);\n  document.querySelector('.backdrop').remove();\n  ingrList = [];\n  ingrNameList = [];\n}\n\nexport async function modalBtnListener(e) {\n  if (e.target.dataset.add)\n    return await btnAddFav(e.target.dataset.favid, 'modal');\n}\n","import { FAV_COCKTAIL } from './fav_cocktails';\nimport sprite from '../../../images/svg/sprite.svg';\nimport { notFound } from '../error';\nimport { initTheme, resetTheme } from '../switcher/switcher';\nimport * as modal from '../modal';\n\nconst refCocktList = document.querySelector('.js-add_f-coctail');\nconst actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\nconst refForm = document.querySelector('.header__input');\nrefForm.addEventListener('submit', searchCockt);\nrefCocktList.addEventListener('click', deleteCard);\n\nif (actArr.length) {\n  renderMarkupList(actArr);\n} else {\n  renderErrorMarkup();\n}\n\nlet themeSwitch = document.getElementById('themeSwitch');\nif (themeSwitch) {\n  initTheme();\n\n  themeSwitch.addEventListener('change', function (event) {\n    resetTheme();\n  });\n}\n\nasync function deleteCard(e) {\n  if (e.target.tagName !== 'BUTTON') return;\n  if (e.target.dataset.favid) {\n    deleteFavFromLS(e.target.dataset.favid);\n    e.target.parentNode.parentNode.remove();\n    return;\n  }\n  if (e.target.dataset.type) await modal.searchCoctById(e.target.dataset.id);\n}\n\nfunction renderMarkupList(data = []) {\n  const mark = data\n    .map(({ strDrink, strDrinkThumb, idDrink }) => {\n      return `<li class=\"coctail-card\">\n      <img class=\"img\" src=${strDrinkThumb} alt=${strDrink}/img>\n      <h3 class=\"coctail-card__name\">${strDrink}</h3>\n      <div class=\"coctail-card__options\">\n        <button class=\"button-learn_more\" data-id=${idDrink} data-type=\"learn\">Learn more</button>\n        <button class=\"button-add_to\" data-favid=${idDrink} data-add=\"add\">\n          Remove\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-heart_full\"></use>\n          </svg>\n        </button>\n      </div>\n    </li>`;\n    })\n    .join('');\n  refCocktList.innerHTML = mark;\n}\n\nfunction renderErrorMarkup() {\n  const mark = `<li class=\"f-coctails__item\">\n              You haven't added any favorite cocktails yet\n            </li>`;\n  refCocktList.innerHTML = mark;\n}\n\nfunction deleteFavFromLS(id) {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  for (let i = 0; i < actArr.length; i++) {\n    if (actArr[i].idDrink === id) {\n      actArr.splice(i, 1);\n      localStorage.setItem(FAV_COCKTAIL, JSON.stringify(actArr));\n      return;\n    }\n  }\n}\n\nfunction searchCockt(e) {\n  e.preventDefault();\n  const searchQ = e.currentTarget.finder.value.trim();\n  if (!searchQ) return;\n  console.log(actArr);\n  const result = actArr.filter(el =>\n    el.strDrink.toLowerCase().includes(searchQ.toLowerCase())\n  );\n\n  if (!result.length) return (refCocktList.innerHTML = notFound);\n  renderMarkupList(result);\n}\n"],"names":["parcelRequire","register","JSON","parse","$aEubW","$84db521a7f184057$exports","URL","resolve","import","meta","url","toString","async","$5e977a873dc9f61c$export$486889e080336f61","id","type","data","getCoctById","strDrink","strDrinkThumb","idDrink","drinks","actArr","localStorage","getItem","drinkArr","i","length","splice","setItem","stringify","document","querySelector","textContent","$5e977a873dc9f61c$export$ad3ece6f84e179","push","innerHTML","$parcel$interopDefault","$5e977a873dc9f61c$export$ffacd2ba7b00d2a1","error","console","log","$896fffb061bf2dd3$export$b8e1776639cab043","$896fffb061bf2dd3$export$b479983db42c04bc","$896fffb061bf2dd3$export$aae5fdf56f95e7b4","newArr","$896fffb061bf2dd3$export$627f30d868f9bcdf","ingredients","strInstructions","btn","find","item","markup","map","ingr","ind","join","body","insertAdjacentHTML","addEventListener","$896fffb061bf2dd3$export$3f6fecd573f3fa48","$896fffb061bf2dd3$export$fdcdaebe9817737f","$1dMoQ","onClickIngr","$896fffb061bf2dd3$export$add40575555c273c","e","removeEventListener","remove","target","dataset","add","favid","$d090c5f393355eca$var$refCocktList","$d090c5f393355eca$var$actArr","preventDefault","searchQ","currentTarget","finder","value","trim","result","filter","el","toLowerCase","includes","$gDQKf","notFound","$d090c5f393355eca$var$renderMarkupList","tagName","actArr1","$d090c5f393355eca$var$deleteFavFromLS","parentNode","$d090c5f393355eca$var$themeSwitch","getElementById","mark","$lmZ5B","initTheme","event","resetTheme"],"version":3,"file":"f_coctail.dd89cc4c.js.map"}